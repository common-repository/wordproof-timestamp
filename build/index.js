!function(){var e={703:function(e,t,o){"use strict";var n=o(414);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,o,r,a,s){if(s!==n){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var o={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return o.PropTypes=o,o}},697:function(e,t,o){e.exports=o(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,o),a.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=o(697),n=o.n(t);const{Modal:r}=wp.components,a=t=>{const{title:o,children:n,close:a}=t;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(r,{style:{maxWidth:"440px"},title:o,onRequestClose:a},n))};a.proptypes={title:n().string.isRequired,children:n().any,close:n().func.isRequired};var s=a;function i(e){const t=new window.CustomEvent(e);window.dispatchEvent(t)}function c(){i("wordproof:open_authentication")}function l(){i("wordproof:open_settings")}const{Button:p}=wp.components,{useCallback:u}=wp.element,{__:__}=wp.i18n,d=t=>{const{close:o}=t,n=u((e=>{e.preventDefault(),i("wordproof:open_authentication")}));return(0,e.createElement)(s,{close:o,title:__("Authentication denied","wordproof")},(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,__("You need to allow WordProof to access your site to finish the WordProof installation.","wordproof")),(0,e.createElement)(p,{variant:"primary",onClick:n},__("Retry authentication","wordproof"))))};d.proptypes={close:n().func.isRequired};var w=d;function f(t,o){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(0,e.createInterpolateElement)(t,{a:(0,e.createElement)("a",{id:n,href:o,target:"_blank",rel:"noopener noreferrer"})})}const{Button:m}=wp.components,{useCallback:h}=wp.element,{__:y,sprintf:g}=wp.i18n,v=t=>{const{close:o}=t,n=h((e=>{e.preventDefault(),i("wordproof:open_authentication")}));return(0,e.createElement)(s,{close:o,title:y("Authentication failed","wordproof")},(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,g(
/* Translators: %s expands to WordProof */
y("Something failed during the authentication of your %s account.","wordproof"),"WordProof"),f(g(
/* Translators: %1s and %2s are html tags. %3s expands to WordProof */
y("Please try again or contact the %1$s%3$s support team%2$s.","wordpress-seo"),"<a>","</a>","WordProof"),"https://help.wordproof.com/")),(0,e.createElement)(m,{variant:"primary",onClick:n},y("Retry authentication","wordproof"))))};v.proptypes={close:n().func.isRequired};var E=v;const{__:L,sprintf:b}=wp.i18n,{compose:_}=wp.compose,{withSelect:k}=wp.data,x=t=>{const{close:o,postType:n}=t;return(0,e.createElement)(s,{close:o,title:L("Authenticated","wordproof")},(0,e.createElement)("p",null,b(
/* translators: %s expands to WordProof. */
L("You have successfully connected your %s account with this site.","wordproof"),"WordProof"),n&&b(
/* translators: %s is the singular post type. */
L("Your %s will now be timestamped everytime you update or publish.","wordproof"),n)))};x.proptypes={close:n().func.isRequired};var P=_([k((e=>({postType:e("core/editor").getCurrentPostType()})))])(x);const{__:C,sprintf:A}=wp.i18n,T=t=>{const{close:o}=t;return(0,e.createElement)(s,{close:o,title:C("Webhook failed","wordproof")},(0,e.createElement)("p",null,A(
/* Translators: %s expands to WordProof */
C("The timestamp sent by %s was not received on your website.","WordProof"),"WordProof"),f(A(
/* Translators: %1s and %2s are html tags. %3s expands to WordProof */
C("Please contact the %1$s%3$s support team%2$s to help solve this problem.","wordpress-seo"),"<a>","</a>","WordProof"),"https://help.wordproof.com/")))};T.proptypes={close:n().func.isRequired};var W=T;const{useState:S,useCallback:O,useEffect:R}=wp.element;var B=()=>{const[t,o]=S(null),n=O((()=>{o("oauth:failed")})),r=O((()=>{o("oauth:denied")})),a=O((()=>{o("webhook:failed")})),s=O((()=>{o("oauth:success")})),i=O((()=>{o(null)}));return R((()=>(window.addEventListener("wordproof:oauth:success",s,!1),window.addEventListener("wordproof:oauth:failed",n,!1),window.addEventListener("wordproof:oauth:denied",r,!1),window.addEventListener("wordproof:webhook:failed",a,!1),()=>{window.removeEventListener("wordproof:oauth:success",s,!1),window.removeEventListener("wordproof:oauth:failed",n,!1),window.removeEventListener("wordproof:oauth:denied",r,!1),window.removeEventListener("wordproof:webhook:failed",a,!1)})),[]),(0,e.createElement)(e.Fragment,null,"oauth:success"===t&&(0,e.createElement)(P,{close:i}),"oauth:denied"===t&&(0,e.createElement)(w,{close:i}),"oauth:failed"===t&&(0,e.createElement)(E,{close:i}),"webhook:failed"===t&&(0,e.createElement)(W,{close:i}))},D=window.wp.apiFetch,$=o.n(D);const I=async e=>M({path:`wordproof/v1/posts/${e}/timestamp`,method:"POST"});async function F(e,t,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;try{const r=await e();return!!r&&(r.status===n?t(r):o(r))}catch(e){}}async function M(e){try{return await $()(e)}catch(e){return e.error&&e.status?e:e instanceof window.Response&&await e.json()}}const Y=async()=>await F((async()=>await(async()=>await M({path:"wordproof/v1/oauth/destroy",method:"POST"}))()),(e=>e),(()=>!1)),{get:j}=lodash,q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return j(window,"wordproofSdk.data"+(e?`.${e}`:""),t)},{dispatch:N}=wp.data;function z(){const{setIsAuthenticated:e,setSelectedPostTypes:t}=N("wordproof"),o=q("popup_redirect_authentication_url"),n=q("popup_redirect_settings_url");let r=null;const a=(e,t)=>{r=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:800,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:680;const a=e.top.outerHeight/2+e.top.screenY-r/2,s=e.top.outerWidth/2+e.top.screenX-n/2;return e.open(t,o,`toolbar=no,\n\t\tlocation=no,\n\t\tdirectories=no,\n\t\tstatus=no,\n\t\tmenubar=no,\n\t\tresizable=no,\n\t\tcopyhistory=no,\n\t\twidth=${n},\n\t\theight=${r},\n\t\ttop=${a},\n\t\tleft=${s}`)}(window,e,t),r&&r.focus(),window.addEventListener("message",s,!1)},s=async e=>{const{data:t,source:o,origin:n}=e;if(n===q("origin")&&r===o)switch(t.type){case"wordproof:oauth:granted":!1===await p(t)&&await c("wordproof:oauth:failed",!1);break;case"wordproof:oauth:failed":await c("wordproof:oauth:failed",!1);break;case"wordproof:oauth:denied":await c("wordproof:oauth:denied",!1);break;case"wordproof:oauth:invalid_token":await c("wordproof:oauth:invalid_token",!1);break;case"wordproof:webhook:success":await c("wordproof:oauth:success",!0);break;case"wordproof:webhook:failed":await c("wordproof:webhook:failed",!1);break;case"wordproof:settings:updated":await c("wordproof:settings:updated"),await u(t);break;case"wordproof:oauth:destroy":await c("wordproof:oauth:destroy",!1);break;case"wordproof:oauth:retry":await c("wordproof:open_authentication",!1);break;case"wordproof:oauth:close":l()}},c=async function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;l(),i(t),!1===o&&(await Y(),e(!1)),!0===o&&e(!0)},l=()=>{window.removeEventListener("message",s,!1),r.close()},p=async e=>{await F((()=>(async e=>{const{state:t,code:o}=e;return await M({path:"wordproof/v1/oauth/authenticate",method:"POST",data:{state:t,code:o}})})(e)),(async e=>{const t={type:"wordproof:sdk:access-token",source_id:e.source_id};return r.postMessage(t,q("origin")),!0}),(async()=>!1))},u=async e=>{await F((()=>(async e=>{const{settings:t}=e;return await M({path:"wordproof/v1/settings",method:"POST",data:{settings:t}})})(e)),(async()=>{const o=e.settings;return o.selectedPostTypes&&t(o.selectedPostTypes),!0}),(async()=>!1))};window.addEventListener("wordproof:open_authentication",(e=>{e.preventDefault(),a(o,"WordProof_Authentication")}),!1),window.addEventListener("wordproof:open_settings",(e=>{e.preventDefault(),a(n,"WordProof_Settings")}),!1)}var U=window.wp.components;const{__:H}=wp.i18n,{useCallback:V,useEffect:X}=wp.element,{withSelect:G}=wp.data,{compose:J}=wp.compose;var K=J([G((e=>({isAuthenticated:e("wordproof").getIsAuthenticated()})))])((t=>{X((()=>{z()}),[]);const{isAuthenticated:o}=t,n=q("bulk_url"),r=V((e=>{e.preventDefault(),c()})),a=V((e=>{e.preventDefault(),l()}));return(0,e.createElement)("div",{className:"mt-6"},(0,e.createElement)(U.__experimentalHeading,null,H("WordProof is installed","wordproof")," ðŸŽ‰"),!o&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",{class:"max-w-xl"},H("We just need to do one more thing. Using the button below, register a new account or log-in with your existing account. After authentication you are ready to timestamp your posts and pages.","wordproof")),(0,e.createElement)(U.Button,{variant:"primary",onClick:r},(0,e.createElement)("svg",{style:{marginRight:"6px"},fill:"#fff",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"15px",height:"15px"},(0,e.createElement)("path",{d:"M 25.980469 2.9902344 A 1.0001 1.0001 0 0 0 25.869141 3 L 20 3 A 1.0001 1.0001 0 1 0 20 5 L 23.585938 5 L 13.292969 15.292969 A 1.0001 1.0001 0 1 0 14.707031 16.707031 L 25 6.4140625 L 25 10 A 1.0001 1.0001 0 1 0 27 10 L 27 4.1269531 A 1.0001 1.0001 0 0 0 25.980469 2.9902344 z M 6 7 C 4.9069372 7 4 7.9069372 4 9 L 4 24 C 4 25.093063 4.9069372 26 6 26 L 21 26 C 22.093063 26 23 25.093063 23 24 L 23 14 L 23 11.421875 L 21 13.421875 L 21 16 L 21 24 L 6 24 L 6 9 L 14 9 L 16 9 L 16.578125 9 L 18.578125 7 L 16 7 L 14 7 L 6 7 z"})),H("Authenticate with WordProof","wordproof"))),o&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",{class:"max-w-xl"},H("You are authenticated with WordProof! You can change your settings below or start timestamping your posts and pages.","wordproof")),(0,e.createElement)(U.Button,{variant:"primary",onClick:a},(0,e.createElement)("svg",{style:{marginRight:"6px"},fill:"#fff",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"15px",height:"15px"},(0,e.createElement)("path",{d:"M 25.980469 2.9902344 A 1.0001 1.0001 0 0 0 25.869141 3 L 20 3 A 1.0001 1.0001 0 1 0 20 5 L 23.585938 5 L 13.292969 15.292969 A 1.0001 1.0001 0 1 0 14.707031 16.707031 L 25 6.4140625 L 25 10 A 1.0001 1.0001 0 1 0 27 10 L 27 4.1269531 A 1.0001 1.0001 0 0 0 25.980469 2.9902344 z M 6 7 C 4.9069372 7 4 7.9069372 4 9 L 4 24 C 4 25.093063 4.9069372 26 6 26 L 21 26 C 22.093063 26 23 25.093063 23 24 L 23 14 L 23 11.421875 L 21 13.421875 L 21 16 L 21 24 L 6 24 L 6 9 L 14 9 L 16 9 L 16.578125 9 L 18.578125 7 L 16 7 L 14 7 L 6 7 z"})),H("Edit settings","wordproof"))),(0,e.createElement)(B,null),(0,e.createElement)("p",{className:"max-w-xl"},H("To timestamp all of your posts, pages or other post types, you can use our bulk timestamper.","wordproof")),(0,e.createElement)(U.Button,{variant:"secondary",href:n},H("Bulk timestamp","wordproof")))}));function Q(e){return new Promise((t=>setTimeout(t,e)))}const{__:Z}=wp.i18n,{useCallback:ee,useEffect:te,useState:oe}=wp.element,{withSelect:ne}=wp.data,{compose:re}=wp.compose,{xor:ae}=lodash;var se=re([ne((e=>({isAuthenticated:e("wordproof").getIsAuthenticated(),balance:e("wordproof").getBalance()})))])((t=>{const{isAuthenticated:o,balance:n}=t,r=q("post_types"),[a,s]=oe([]),[i,p]=oe(!1),[u,d]=oe(0),[w,f]=oe(0),[m,h]=oe([]);te((()=>{z()}),[]);const y=ee((e=>{e.preventDefault(),c()})),g=ee((e=>{e.preventDefault(),l()})),v=ee((async e=>{e.preventDefault(),p(!0);let t=1;for(const e of m)f(t++),I(e),await Q(1e3);p(!1)})),E=ee((()=>Object.entries(r).map((t=>{let[o,n]=t;return(0,e.createElement)(U.CheckboxControl,{label:o+" ("+n.count+")",onChange:()=>{L(o)}})})))),L=ee((e=>{const t=ae(a,[e]);s(t);let o=[];t.forEach((e=>{const t=r[e];o=o.concat(t.postIds)})),d(o.length),h(o)})),b=ee((()=>!!i||_())),_=ee((()=>u>n));return(0,e.createElement)("div",{className:"mt-6"},(0,e.createElement)(U.__experimentalHeading,null,"Bulk timestamper"),!o&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,"We just need to do one more thing. Using the button below, register a new account or log-in with your existing account. After authentication you are ready to timestamp your posts and pages."),(0,e.createElement)(U.Button,{variant:"primary",onClick:y},"Authenticate with WordProof")),o&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,"Start timestamping all of your posts. You can select what post types you want to start with."),E(),(0,e.createElement)(U.Button,{variant:"primary",onClick:v,disabled:b()},"Start timestamping"),_()&&(0,e.createElement)(U.Notice,{isDismissible:!1,status:"warning",className:"mt-4 mx-0"},"You want to timestamp ",u," items, but you have only ",n," timestamps left.",(0,e.createElement)("span",{className:"ml-4"},(0,e.createElement)(U.Button,{variant:"primary",onClick:g},"Upgrade your subscription"))),i&&(0,e.createElement)("span",null,(0,e.createElement)(U.Spinner,null)," ",w," / ",u)),(0,e.createElement)(B,null))}));const{render:ie}=wp.element;document.addEventListener("DOMContentLoaded",(function(t){const o=document.getElementById("wordproof-about");o&&ie((0,e.createElement)(K,null),o)})),document.addEventListener("DOMContentLoaded",(function(t){const o=document.getElementById("wordproof-bulk");o&&ie((0,e.createElement)(se,null),o)}))}()}();